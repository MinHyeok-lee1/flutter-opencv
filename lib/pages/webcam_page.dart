// ignore: avoid_web_libraries_in_flutter
import 'dart:html';
import 'dart:typed_data';
import 'package:flutter/material.dart';
import 'dart:ui' as ui;
import 'package:opencvpj/service/ml_service.dart';

class WebcamPage extends StatefulWidget {
  const WebcamPage({Key? key}) : super(key: key);

  @override
  _WebcamPageState createState() => _WebcamPageState();
}

class _WebcamPageState extends State<WebcamPage> {
  late Uint8List openCV;
  // Webcam widget to insert into the tree
  late Widget _webcamWidget;
  bool flag = false;
  // VideoElement
  late VideoElement _webcamVideoElement;
  MLService _mlService = MLService();

  @override
  void initState() {
    super.initState();

    // Create an video element which will be provided with stream source
    _webcamVideoElement = VideoElement();

    // Register an webcam
    ui.platformViewRegistry.registerViewFactory('webcamVideoElement', (int viewId) => _webcamVideoElement);

    // Create video widget
    _webcamWidget = HtmlElementView(key: UniqueKey(), viewType: 'webcamVideoElement');

    // Access the webcam stream
    window.navigator.getUserMedia(video: true).then((MediaStream stream) {
      _webcamVideoElement.srcObject = stream;
    });
  }

  @override
  Widget build(BuildContext context) => Scaffold(
    body: Center(
      child: Column(
        mainAxisAlignment: MainAxisAlignment.center,
        children: <Widget>[
          Text(
            'Webcam MediaStream:',
            style: TextStyle(fontSize: 10, fontStyle: FontStyle.italic),
          ),
          Container(width: 250, height: 250, child: _webcamWidget),
          Container(width: 250, height: 250, child: flag ? Image.memory(openCV) : Text('loading...')),
          Center(child: Container(
            width: 150,
            height: 60,
            child: TextButton(
              onPressed: () async {
                var video = await _mlService.convertImage('data:image/jpeg;base64,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' as Uint8List);
                setState((){
                  openCV = video as Uint8List;
                });
              },
              child: Text('Press', style: TextStyle(fontSize: 24)),

            ),
          )),
        ],
      ),
    ),
    floatingActionButton: FloatingActionButton(
      onPressed: () => (flag = !flag) ? _webcamVideoElement.play() : _webcamVideoElement.pause(),
      tooltip: 'Start stream, stop stream',
      child: Icon(Icons.camera_alt),
    ),
  );
}
